<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Perfil - PCQI</title>
    
    <link rel="stylesheet" href="../styles/style.css">
    <link rel="stylesheet" href="../styles/dashboard.css">
    <link rel="stylesheet" href="../styles/profile.css">
</head>
<body>
    <div id="header-container"></div>

    <main class="profile-main fade-in">
        <div class="container">
            <a href="/screens/dashboard.html" class="back-link">
                &larr; Voltar ao Dashboard
            </a>

            <div class="profile-grid">
                
                <aside class="profile-card-large">
                    <div class="avatar-large-container">
                        <div class="avatar-large">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M12 12C14.7614 12 17 9.76142 17 7C17 4.23858 14.7614 2 12 2C9.23858 2 7 4.23858 7 7C7 9.76142 9.23858 12 12 12Z" fill="#2ecc71" stroke="none"/>
                                <path d="M20.5899 22C20.5899 18.13 16.7399 15 12.0099 15C7.27991 15 3.40991 18.13 3.40991 22" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <span class="role-badge" id="display-role">Carregando...</span>
                    </div>

                    <div class="user-details">
                        <h2 id="display-name">...</h2>
                        <p id="display-email">...</p>
                    </div>

                    <div class="profile-stats">
                        <div class="stat-box">
                            <span class="stat-value" id="stat-sectors-count">-</span>
                            <span class="stat-label">Setores</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-value" id="stat-machines-count">-</span>
                            <span class="stat-label">Máquinas</span>
                        </div>
                    </div>
                </aside>

                <div class="profile-content">
                    
                    <section class="content-card">
                        <div class="card-header">
                            <h3>Meus Setores de Trabalho</h3>
                            <p>Áreas onde você tem permissão de acesso.</p>
                        </div>
                        <div id="my-sectors-list" class="sectors-grid">
                            <p class="loading-text">Buscando setores...</p>
                        </div>
                    </section>

                    <section class="content-card">
                        <div class="card-header">
                            <h3>Segurança</h3>
                            <p>Atualize sua senha de acesso.</p>
                        </div>
                        <form id="form-change-password">
                            <div class="form-group">
                                <label>Nova Senha</label>
                                <input type="password" id="new-password" placeholder="Mínimo 6 caracteres" minlength="6">
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn-primary">Atualizar Senha</button>
                            </div>
                        </form>
                    </section>

                </div>
            </div>
        </div>
    </main>
    
    <script src="../js/config/config.js"></script>
    <script src="../js/utils/htmlLoader.js"></script>
    <script src="../js/services/User_api.js"></script> 
    <script src="../js/services/Machine_api.js"></script> 
    <script src="../js/common/header.js"></script>
    <script src="../js/profile.js"></script>
</body>
</html>